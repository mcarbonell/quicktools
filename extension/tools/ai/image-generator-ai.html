<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Image Generator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 1rem; background: #f8f9fa; }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .text-muted { color: #6c757d; font-size: 0.875rem; margin-bottom: 1rem; display: block; }
        .alert { padding: 0.75rem; border-radius: 4px; margin-bottom: 1rem; }
        .alert-warning { background: #fff3cd; border: 1px solid #ffc107; }
        .alert-success { background: #d4edda; border: 1px solid #c3e6cb; }
        .alert-info { background: #d1ecf1; border: 1px solid #bee5eb; }
        .alert h5 { font-size: 1rem; margin-bottom: 0.5rem; }
        .alert ol { margin: 0.5rem 0; padding-left: 1.5rem; font-size: 0.875rem; }
        .input-group { display: flex; gap: 0.5rem; margin-bottom: 0.5rem; }
        .input-group input, .input-group textarea { flex: 1; padding: 0.5rem; border: 1px solid #dee2e6; border-radius: 4px; font-family: inherit; }
        textarea { min-height: 100px; resize: vertical; width: 100%; }
        .btn { padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; font-size: 0.875rem; }
        .btn-primary { background: #007bff; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-sm { padding: 0.375rem 0.75rem; font-size: 0.8rem; }
        .d-none { display: none !important; }
        .d-flex { display: flex; }
        .justify-content-between { justify-content: space-between; }
        .align-items-center { align-items: center; }
        .mb-3 { margin-bottom: 1rem; }
        .mt-4 { margin-top: 1.5rem; }
        label { display: block; margin-bottom: 0.5rem; font-weight: 500; }
        small { color: #6c757d; font-size: 0.875rem; }
        img { max-width: 100%; height: auto; border-radius: 4px; display: block; margin-bottom: 1rem; border: 1px solid #dee2e6; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ AI Image Generator</h1>
        <span class="text-muted">Generate images from text using Gemini 2.5 Flash Image (Nano Banana).</span>

        <div id="apiKeySetup" class="alert alert-warning">
            <h5>âš™ï¸ ConfiguraciÃ³n Inicial</h5>
            <p>Necesitas una API key <strong>de pago</strong> de Google AI Studio (Nano Banana requiere tier de pago):</p>
            <ol>
                <li>Visita <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></li>
                <li>Crea una API key con <strong>facturaciÃ³n de pago habilitada</strong></li>
                <li>PÃ©gala abajo ğŸ‘‡</li>
            </ol>
            <div class="input-group">
                <input type="password" id="apiKeyInput" placeholder="AIzaSy...">
                <button class="btn btn-primary" id="saveKeyBtn">ğŸ’¾ Guardar</button>
            </div>
            <small>ğŸ”’ Se guarda en tu navegador | ğŸ’° ~$0.0125 por imagen</small>
        </div>

        <div id="apiKeyManage" class="alert alert-success d-none">
            <div class="d-flex justify-content-between align-items-center">
                <span>âœ… API Key configurada</span>
                <button class="btn btn-danger btn-sm" id="removeKeyBtn">ğŸ—‘ï¸ Eliminar</button>
            </div>
        </div>

        <div id="toolSection" class="d-none">
            <div class="alert alert-info">
                <strong>ğŸ¨ Nano Banana:</strong> Genera imÃ¡genes desde descripciones de texto usando Gemini 2.5 Flash Image.
                <br><small>Costo: ~$0.0125 por imagen | Incluye marca de agua invisible SynthID</small>
            </div>

            <div class="mb-3">
                <label>Describe la imagen que quieres generar:</label>
                <textarea id="promptText" placeholder="Ejemplo: Una ciudad futurista al atardecer con autos voladores y luces de neÃ³n, estilo cyberpunk, muy detallado"></textarea>
                <small>SÃ© especÃ­fico y detallado para mejores resultados</small>
            </div>

            <button class="btn btn-primary" id="generateBtn">âœ¨ Generar Imagen</button>

            <div id="resultSection" class="mt-4 d-none">
                <div id="textResponse" class="alert alert-success d-none"></div>
                <h3 style="font-size: 1.1rem; margin-bottom: 0.5rem;">Imagen Generada:</h3>
                <img id="generatedImg" alt="Generated image">
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn btn-primary" id="downloadBtn">ğŸ’¾ Descargar Imagen</button>
                    <button class="btn btn-secondary" id="resetBtn">ğŸ”„ Generar Otra</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../../shared/gemini-api.js"></script>
    <script src="./image-generator-ai.js"></script>
</body>
</html>
